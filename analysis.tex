\section{Ограничения, предъявляемые к информационному обмену}

\iffalse

Тезисы:

0. В разных протоколах написаны примерно одинаковые вещи =>
1. Требования нужно разбивать на простые, и это будет универсально и удобно.
2. Список требований как результат изучения протоколов и обсуждения с 
разработчиками и тестерами РВС.
3. Замечание о том, что в данной работе мы работаем с МКИО, но подразумевается 
расширение и на другие каналы связи.

\fi

В рамках данной работы требуется опеределить перечень требований, которые 
предъявляются к информационному обмену в РВС.

Для формулировки перечня требований были проанализированы фрагменты протоколов, 
описания структуры баз данных протоколов информационного обмена (БД ПИВ), а 
также были опрошены эксперты ``ОКБ Сухого'' и ``ОАК - Центр Комплексирования'', 
занимающиеся разработкой и тестированием РВС с использованием каналов связи MIL 
STD-1553B.

Требования в протоколах описаны в текстовом виде на естественном 
языке и используются разработчиками для согласования работы отдельных узлов 
системы, в том числе при проектировании системы несколькими рабочими группами, 
а также при отладке.

Набор требований к РВС используется также для того, чтобы уточнить понятие 
корректного состояния системы. Нарушение требований может привести к 
некорретному функционированию системы. Таким образом, проверка соблюдения 
требований позволяет определить возможные проблемы и ошибки системы на разных 
этапах жизненного цикла РВС.

Требования, выделяемые из протоколов, сводятся к набору простых ограничений, 
накладываемых на информационный обмен. 

Можно выделить два основных класса ограничений:

\begin{itemize}
 \item ограничения, накладываемые на свойства сообщений;
 \item ограничения, накладываемые на значения параметров.
\end{itemize}

Среди свойств сообщений важно отметить следующие:

\begin{itemize}
 \item состояние флагов ошибок, специфических для различных каналов связи;
 \item частота появления сообщения в канале связи;
 \item последовательность появления сообщений различных типов в канале связи.
\end{itemize}

Отдельно рассматриваются ограничения, накладываемые на значения передаваемых 
параметров. Часто значения параметров - это числовые представления значений 
каких-либо физических показателей управляемой системы (скорость, координаты и 
т.п.). Таким образом, на эти значения можно накладывать естественные 
ограничения: пороговые значения, ограничение на производную по времени и т.п.

В ходе обсуждения с разработчиками РВС было предложено также проверять 
корректность значений у группы логически связанных параметров. Например, 
бортовая РВС самолёта может получить значение высоты над уровнем моря от 
нескольких источников: от барометрического датчика и от блока вычисления 
координат с использованием GPS/ГЛОНАСС. Значительное расхождение значений 
этих параметров может означать неполадки в работе какого-либо из узлов системы, 
либо ошибку в программном обеспечении. В любом случае, подобная проверка 
окажется полезной.

%TODO формулировка
Некоторые параметры используются также в сервисных целях. К примеру, 
достаточно часто устройства бортовых РВС передают специальный 
параметр-счётчик, значение которого увеличивается на 1 с заданной частотой, что 
позволяет другим абонентам определить зависание управляющей программы 
устройства (при этом значение перестанет увеличиваться со временем). Также 
сервисные параметры могут использоваться для индикации режима работы устройства 
(например, с помощью кода ошибки или набора флагов). В этом случае можно 
определить подмножества допустимых значений, определяющие нормальный и 
ошибочный режимы работы узла.

Таким образом, в результате анализа был составлен следующий перечень 
возможных ограничений, предъявляемых к обменам:

\begin{itemize}
 \item для сообщений:
 \begin{itemize}
  \item проверка частоты появления сообщения данного типа (равенство константе 
с заданной погрешностью);
  \item проверка флагов ошибок, специфических для конкретного канала связи;
  \item проверка последовательности появления сообщений различных типов в 
канале;
  \item проверка значения контрольной суммы для набора передаваеых данных;
 \end{itemize}
 \item для параметров:
 \begin{itemize}
  \item проверка частоты обновления значения параметра (минимальное значение 
частоты с заданной погрешностью);
  \item проверка выхода значения параметра за пороговые значения (ограничение 
сверху и снизу);
  \item проверка на равенство константе с заданной погрешностью;
  \item проверка на гладкость (ограничение первой производной значения 
параметра по времени по модулю сверху с заданной погрешностью);
  \item проверка равенства значений группы связанных параметров с заданными 
погрешностями;
  \item проверка на ошибочность значения (для целочисленных параметров);
  \item проверка автоматического увеличения значения параметра с определённой 
частотой (с заданной погрешностью частоты, для целочисленных параметров).
 \end{itemize}
\end{itemize}

Приведённый выше набор ограничений должен покрыть достаточно большой круг задач 
автоматической проверки системы на корректное функционирование. Тем не менее, 
в качестве отдельного требования к разрабатываемому решению предлагается 
обеспечить возможность реализации проверки других типов ограничений, 
накладываемых на сообщения или параметры.


\iffalse
Как правило, в таких системах компоненты взаимодействуют друг с другом в 
соответствии с набором протоколов. \textit{Протокол} - документ, содержащий 
информацию о компонентах системы, адресации на каналах передачи данных, наборе 
передаваемых сообщений, их свойствах (форматах, частотах, ограничениях на 
последовательность и т.п.), а также описание содержимого этих сообщений. 
Протоколы согласуются и утверждаются разработчиками РВС.

Одной из задач интеграционного тестирования РВС является проверка соблюдения 
компонентами требований, описанных в этих протоколах. Стоит отметить, 
что часто протоколы представляют собой неформальное текстовое описание, 
непригодное для проведения автоматической проверки. Тем не менее, из 
используемых на практике протоколов можно выделить общий набор типов 
требований, 
предъявляемых к сообщениям и передаваемым в них данным. После предложения 
формального представления этих требований появляется возможность проведения 
автоматического анализа системы на их соблюдение.

Несоблюдение системой требований из протоколов может означать, что при 
проектировании или разработке РВС была допущена ошибка, или какое-либо 
устройство (или несколько устройств) в системе работают некорректно.
\fi